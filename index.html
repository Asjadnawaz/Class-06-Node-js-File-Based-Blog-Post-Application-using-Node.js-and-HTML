<!DOCTYPE html>
<html lang="en">
<head>
  <title>Posts App</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-200 min-h-screen flex justify-center p-6">

  <div class="w-full max-w-2xl">

    <!-- Create Post Card -->
    <div class="bg-white shadow-lg rounded-2xl p-6 mb-8">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">Create a Post</h2>

      <input id="title"
        placeholder="Enter Title"
        class="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 outline-none"
      >

      <textarea id="content"
        placeholder="Enter Content"
        class="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 outline-none"
      ></textarea>

      <button
        onclick="createPost()"
        class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition font-semibold"
      >
        Create Post
      </button>
    </div>

    <!-- Posts List -->
    <h2 class="text-2xl font-bold mb-4 text-gray-800">All Posts</h2>

    <div id="posts" class="space-y-4"></div>

  </div>

  <script>
    async function loadPosts() {
      const res = await fetch("/posts");
      const posts = await res.json();
      const container = document.getElementById("posts");
      container.innerHTML = "";

 

        posts.forEach(p => {
        container.innerHTML += `
          <div class="bg-white shadow-md rounded-xl p-5">
            <h3 class="text-xl font-semibold text-gray-900">${p.title}</h3>
            <p class="text-gray-700 mt-2">${p.content}</p>

            <button onclick="deletePost(${p.id})"
              class="mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
              Delete
            </button>
          </div>
        `;
      });

      }



    async function createPost() {
      const title = document.getElementById("title").value;
      const content = document.getElementById("content").value;

      await fetch("/create-post", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ title, content })
      });

      document.getElementById("title").value = "";
      document.getElementById("content").value = "";

      loadPosts();
    }

    async function deletePost(id) {
      await fetch("/delete-post", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id })
      });

      loadPosts();
    }

    loadPosts();
  </script>

</body>
</html>
